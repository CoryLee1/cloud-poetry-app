# Cloud Poetry App 🌤️

一个基于Three.js和p5.js的云端诗歌生成应用，结合了3D云朵效果、诗歌分词落下动画和背景音乐。

## ✨ 主要功能

### 🎨 视觉效果
- **3D云朵渲染**：使用Three.js实现的体积云效果
- **云朵交互**：支持鼠标/触摸旋转云朵
- **天空背景**：渐变天空球背景
- **响应式设计**：适配不同屏幕尺寸

### 📝 诗歌生成
- **AI诗歌生成**：基于用户输入的心情生成诗歌
- **语音输入**：支持语音识别输入
- **图片生成**：根据诗歌内容生成相关图片
- **渐进显示**：图片生成完成后显示诗歌

### ✨ 交互动画
- **p5.js诗歌落下**：诗歌分词后从屏幕上方落下
- **点击固定**：点击任意词将其固定在屏幕上
- **发光效果**：文字带有blingbling的发光动画
- **细体字体**：优雅的细体文字显示

### 🎵 背景音乐
- **自动播放**：页面加载后自动播放背景音乐
- **渐入效果**：3秒从静音渐入到30%音量
- **循环播放**：音乐持续循环播放
- **浏览器兼容**：解决自动播放限制问题

## 🚀 技术栈

- **前端框架**：原生HTML/CSS/JavaScript
- **3D渲染**：Three.js
- **动画效果**：p5.js
- **后端服务**：Node.js + Express
- **AI服务**：集成诗歌生成和图片生成API
- **音频处理**：HTML5 Audio API

## 📁 项目结构

```
cloud-poetry-app/
├── index.html              # 主页面
├── style.css              # 样式文件
├── three-scene.js         # Three.js场景管理
├── falling-words.js       # p5.js诗歌落下效果
├── server.js              # Node.js服务器
├── api-services.js        # API服务
├── bgm/                   # 背景音乐
│   └── yeule vv.mp3      # 背景音乐文件
├── img/                   # 图片资源
└── src/                   # Three.js库文件
```

## 🎮 使用说明

### 启动应用
```bash
cd cloud-poetry-app
node server.js
```
访问 `http://localhost:3001`

### 交互方式
1. **输入心情**：在输入框中输入你的心情
2. **语音输入**：点击麦克风按钮进行语音输入
3. **生成诗歌**：按回车键生成诗歌
4. **观看动画**：诗歌分词落下，点击固定词语
5. **欣赏音乐**：背景音乐自动播放

## 🎨 视觉效果详解

### 3D云朵效果
- **体积渲染**：使用3D纹理实现云朵体积感
- **动态旋转**：云朵缓慢旋转，营造梦幻氛围
- **光照效果**：模拟真实光照，增强立体感

### 诗歌落下动画
- **智能分词**：按标点符号和语义分割诗歌
- **随机位置**：每个词从屏幕顶部随机位置落下
- **发光效果**：文字带有动态发光和星星点缀
- **点击交互**：点击任意词将其固定在当前位置

### 背景音乐
- **自动播放**：多种触发方式确保音乐播放
- **渐入效果**：3秒从静音渐入到30%音量
- **循环播放**：音乐持续循环，营造氛围

## 🔧 自定义设置

### 音乐音量调整
在 `index.html` 第147行修改：
```javascript
const targetVolume = 0.3; // 调整音量 (0.0-1.0)
```

### 诗歌显示位置
在 `style.css` 第216-240行调整：
```css
.poetry-display {
  top: 20%;    /* 距离顶部 */
  left: 30%;   /* 距离左边 */
}
```

### p5.js动画参数
在 `falling-words.js` 中调整：
```javascript
this.speed = random(0.5, 1);     // 落下速度
this.fontSize = random(12, 16);  // 字体大小
const targetVolume = 0.3;         // 发光强度
```

## 🌟 特色功能

### 渐进式体验
1. **引导界面** → 欢迎用户
2. **输入心情** → 语音或文字输入
3. **生成诗歌** → AI生成个性化诗歌
4. **落下动画** → p5.js交互动画
5. **图片展示** → 根据诗歌生成图片
6. **完整体验** → 音乐+动画+图片

### 多模态交互
- **文字输入**：键盘输入心情
- **语音输入**：麦克风语音识别
- **鼠标交互**：点击固定词语
- **触摸支持**：移动端触摸操作

### 沉浸式体验
- **3D云朵**：营造梦幻氛围
- **背景音乐**：增强沉浸感
- **发光动画**：blingbling效果
- **渐进显示**：优雅的展示节奏

## 🎯 技术亮点

### 性能优化
- **分层渲染**：Three.js + p5.js + UI分层
- **事件优化**：避免重复事件监听
- **内存管理**：及时清理canvas和事件监听器

### 兼容性处理
- **浏览器限制**：解决音频自动播放限制
- **移动端适配**：响应式设计和触摸支持
- **错误处理**：优雅的错误处理和重试机制

### 用户体验
- **渐进加载**：分步骤展示内容
- **视觉反馈**：即时的交互反馈
- **状态指示**：音乐播放状态提示

## 📱 移动端支持

- **响应式设计**：适配不同屏幕尺寸
- **触摸交互**：支持触摸点击和手势
- **性能优化**：移动端性能优化
- **音频兼容**：解决移动端音频播放问题

## 🎨 设计理念

### 视觉设计
- **简约风格**：干净的界面设计
- **梦幻氛围**：3D云朵营造梦幻感
- **优雅动画**：流畅的动画效果
- **层次分明**：合理的视觉层次

### 交互设计
- **直观操作**：简单易懂的交互方式
- **即时反馈**：即时的操作反馈
- **渐进体验**：分步骤的体验设计
- **沉浸感受**：全方位的沉浸体验

## 🚀 未来计划

- [ ] 添加更多音乐选择
- [ ] 支持自定义主题色彩
- [ ] 增加更多动画效果
- [ ] 优化移动端性能
- [ ] 添加社交分享功能

---

**享受你的云端诗歌之旅！** ✨🌤️ 